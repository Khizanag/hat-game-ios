# Cursor Rules for Hat Game iOS

> Shared conventions live in `IOS_GENERAL_RULES.md`. Follow everything in that file plus the Hat Game–specific rules below.

## Design System
- Use DesignBook for every visual token (fonts, colors, spacing, sizes, opacity, shadows, etc.).
- Never introduce raw numeric values or `Color.*` literals; add new tokens to DesignBook with generic names (e.g., `Color.Text.Status.error`).
- **MANDATORY**: All font sizes, icon sizes, and numeric values MUST come from DesignBook. Never use `.font(.system(size: 24))` or similar hardcoded values.
- If a font size, icon size, or other value is missing from DesignBook, add it to DesignBook first, then use it.
- Hat Game screens must not use "Sheet" in their names—always prefer `SomeView`.

## Architecture
- Keep game logic inside `GameManager` and keep configuration data inside `AppConfiguration`/`GameConfiguration`.
- Use the `Navigator` + `Page` pattern for every flow; add wrapper views when you need to access the environment.
- Track per-entity state with dictionaries when that simplifies lookups (e.g., `wordsGuessedByTeam: [Team: [Word]]`).

## Testing
- Use `AppConfiguration`’s test mode to prefill teams, players, and sample words so flows can be exercised quickly.